{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://project-ai.org/schemas/atlas/organization.v1.json",
  "title": "Organization",
  "description": "Canonical schema for organizational entities in PROJECT ATLAS. Immutable and locked for sovereign use.",
  "type": "object",
  "required": ["id", "name", "type", "founded", "headquarters", "influence_score", "metadata"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^ORG-[A-Z0-9]{16}$",
      "description": "Unique organization identifier with prefix"
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 256,
      "description": "Official organization name"
    },
    "type": {
      "type": "string",
      "enum": [
        "government",
        "corporation",
        "ngo",
        "military",
        "intelligence",
        "think_tank",
        "media",
        "academic",
        "criminal",
        "unknown"
      ],
      "description": "Organization classification"
    },
    "founded": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "description": "Founding date in ISO 8601 format (YYYY-MM-DD)"
    },
    "headquarters": {
      "type": "object",
      "required": ["country", "city"],
      "properties": {
        "country": {
          "type": "string",
          "minLength": 2,
          "maxLength": 2,
          "description": "ISO 3166-1 alpha-2 country code"
        },
        "city": {
          "type": "string",
          "minLength": 1,
          "maxLength": 128
        },
        "coordinates": {
          "type": "object",
          "required": ["lat", "lon"],
          "properties": {
            "lat": {
              "type": "number",
              "minimum": -90,
              "maximum": 90
            },
            "lon": {
              "type": "number",
              "minimum": -180,
              "maximum": 180
            }
          }
        }
      }
    },
    "influence_score": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Normalized influence score (0-1)"
    },
    "sectors": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "technology",
          "finance",
          "energy",
          "defense",
          "healthcare",
          "media",
          "telecommunications",
          "transportation",
          "education",
          "retail",
          "manufacturing",
          "agriculture",
          "real_estate",
          "entertainment",
          "government",
          "other"
        ]
      },
      "uniqueItems": true
    },
    "relationships": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["target_id", "type", "strength"],
        "properties": {
          "target_id": {
            "type": "string",
            "pattern": "^ORG-[A-Z0-9]{16}$"
          },
          "type": {
            "type": "string",
            "enum": [
              "parent",
              "subsidiary",
              "partner",
              "competitor",
              "supplier",
              "customer",
              "investor",
              "regulator",
              "adversary"
            ]
          },
          "strength": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
          },
          "since": {
            "type": "string",
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "required": ["created_at", "updated_at", "version", "hash"],
      "properties": {
        "created_at": {
          "type": "string",
          "format": "date-time"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time"
        },
        "version": {
          "type": "integer",
          "minimum": 1
        },
        "hash": {
          "type": "string",
          "pattern": "^[a-f0-9]{64}$",
          "description": "SHA-256 hash for provenance"
        },
        "source": {
          "type": "string",
          "description": "Data source identifier"
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      }
    }
  },
  "additionalProperties": false
}
